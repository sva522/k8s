# Configure entrypoints
ports:
  # Service entrypoints
  web:
    port: 8000
    expose:
      default: true       # Create entry in main service
    exposedPort: 80       # Exposed port on VIP
    redirections:
      entryPoint:
        to: websecure
        scheme: https
        permanent: true
  
  websecure:
    port: 8443
    expose:
      default: true       # Create entry in main service
    exposedPort: 443      # Exposed port on VIP
    tls:
      enabled: true

  # Admin entrypoints
  http-admin:
    port: 9000
    expose:
      default: false      # Do not use main service
    redirections:
      entryPoint:
        to: https-admin
        scheme: https
        permanent: true
  
  https-admin:
    port: 9443
    expose:
      default: false      # Do not use main service
    tls:
      enabled: true
      options: "traefik/admin-tls-options@kubernetescrd"

# Main service
service:
  enabled: true
  type: LoadBalancer
  annotations:
    kube-vip.io/loadbalancerIPs: "svc_vip"

# Default TLS certificate
tlsStore:
  default:
    defaultCertificate:
      secretName: tls-svc-lab-ln
